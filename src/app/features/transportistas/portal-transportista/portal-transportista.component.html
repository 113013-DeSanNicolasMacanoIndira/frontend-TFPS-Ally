<div class="layout">

  <!-- ============ SIDEBAR ============ -->
  <aside class="sidebar">
    <h3 class="sidebar-title">Transportista</h3>

    <ul class="menu">
      <li class="menu-item active">
        <i class="bi bi-send"></i>
        Solicitudes recibidas
      </li>

      <li class="menu-item">
        <i class="bi bi-map"></i>
        Zonas asignadas
      </li>

      <li class="menu-item">
        <i class="bi bi-cash-coin"></i>
        Pagos pendientes
      </li>

      <li class="menu-item logout" (click)="logout()">
        <i class="bi bi-box-arrow-right"></i>
        Cerrar sesión
      </li>
    </ul>
  </aside>

  <!-- ============ CONTENIDO ============ -->
  <main class="content">
    <header class="header">
      <div>
        <h2>Portal del Transportista</h2>
        <p>Hola, <strong>{{ username }}</strong>. Aquí están tus solicitudes de traslado.</p>
      </div>
    </header>

    <section class="grid">

      <!-- ============ LISTA ============ -->
      <article class="card card-list">
        <h3>Solicitudes asignadas</h3>

        <div *ngIf="cargando" class="alert alert-info">
          Cargando solicitudes...
        </div>

        <div *ngIf="!cargando && solicitudes.length === 0" class="alert alert-empty">
          No hay solicitudes asignadas por el momento.
        </div>

        <div *ngIf="solicitudes.length > 0" class="table-wrapper">
          <table class="table">
            <thead>
              <tr>
                
                
                <th>Paciente</th>
                <th>Estado</th>
                <th>Acciones</th>
              </tr>
            </thead>

            <tbody>

              <tr *ngFor="let s of solicitudes">
                
                
                <td>{{ s.pacienteId }}</td>

                <td>
                  <span
                    class="badge"
                    [ngClass]="{
                      'badge-pendiente': s.estado === 'PENDIENTE',
                      'badge-aceptado': s.estado === 'ACEPTADO',
                      'badge-rechazado': s.estado === 'RECHAZADO'
                    }"
                  >
                    {{ s.estado }}
                  </span>
                </td>

                <td class="actions">
                  <button class="btn-outline btn-sm success" (click)="aceptar(s.id!)">
                    Aceptar
                  </button>

                  <button class="btn-outline btn-sm danger" (click)="rechazar(s.id!)">
                    Rechazar
                  </button>
                </td>
              </tr>
            </tbody>

          </table>
        </div>
      </article>
    </section>

  </main>
</div>
