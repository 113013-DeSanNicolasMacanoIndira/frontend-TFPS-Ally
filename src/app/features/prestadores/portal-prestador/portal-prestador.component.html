<div class="layout">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <h3 class="sidebar-title">Prestador</h3>

    <ul class="menu">

      <li class="menu-item active" routerLink="/portal-prestador">
        <i class="bi bi-inbox"></i> Solicitudes recibidas
      </li>

      <li class="menu-item" routerLink="/prestador/disponibilidad">
        <i class="bi bi-calendar-check"></i> Mi disponibilidad
      </li>

      <li class="menu-item" routerLink="/prestador/turnos">
        <i class="bi bi-calendar-event"></i> Mis turnos
      </li>

      <li class="menu-item" routerLink="/prestador/pagos">
        <i class="bi bi-credit-card"></i> Pagos pendientes
      </li>

      <li class="menu-item" routerLink="/prestador/configuracion">
        <i class="bi bi-gear"></i> Configuración
      </li>

      <!--  CERRAR SESIÓN -->
      <li class="menu-item logout" (click)="logout()">
        <i class="bi bi-box-arrow-right"></i> Cerrar sesión
      </li>

    </ul>
  </aside>

  <!-- CONTENIDO PRINCIPAL -->
  <main class="content">

    <div class="prestador-header shadow-sm">
      <h2 class="titulo">Portal del Prestador</h2>
      <p class="bienvenida">Hola, <strong>{{ username }}</strong>. Aquí está tu panel de trabajo.</p>
    </div>

    <div class="container mt-4">

      <div *ngIf="cargando" class="alert alert-info text-center">
        Cargando solicitudes...
      </div>

      <div *ngIf="!cargando && solicitudes.length === 0" class="alert alert-warning text-center">
        No tienes solicitudes por el momento.
      </div>

      <!-- TABLA DE SOLICITUDES -->
      <div class="table-wrapper shadow" *ngIf="solicitudes.length > 0">
        <table class="table table-hover table-bordered tabla-solicitudes">

          <thead>
            <tr>
              <th>ID</th>
              <th>Paciente</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let s of solicitudes">
              <td>{{ s.id }}</td>
              <td>#{{ s.pacienteId }}</td>

              <td>
                <span
                  [ngClass]="{
                    'badge badge-pendiente': s.estado === 'PENDIENTE',
                    'badge badge-aceptado': s.estado === 'ACEPTADO',
                    'badge badge-rechazado': s.estado === 'RECHAZADO'
                  }"
                >
                  {{ s.estado }}
                </span>
              </td>

              <td>
                <button class="btn btn-success btn-sm me-2" (click)="aceptar(s.id!)">
                  Aceptar
                </button>
                <button class="btn btn-danger btn-sm" (click)="rechazar(s.id!)">
                  Rechazar
                </button>
              </td>
            </tr>
          </tbody>

        </table>
      </div>

    </div>
  </main>
</div>
<!-- ====================================================================================== -->
<!--  BOTÓN FLOTANTE DE AYUDA -->
<div class="help-button" (click)="abrirFaq()">
  <i class="bi bi-question-circle"></i>
</div>

<!-- MODAL FAQ MEJORADO -->
<div class="faq-modal" *ngIf="mostrarFaq">
  <div class="faq-box shadow-lg">
    <button class="btn-close close-faq" (click)="cerrarFaq()"></button>

    <h4 class="text-center mb-3 fw-bold text-primary">Preguntas Frecuentes</h4>

    <div class="faq-content scrollable">
      <h6><strong>¿Cómo recibo nuevas solicitudes?</strong></h6>
      <p>En la sección “Solicitudes”, donde podrás aceptar o rechazar pacientes.</p>

      <h6><strong>¿Puedo actualizar mis horarios?</strong></h6>
      <p>Sí, desde tu perfil profesional en “Disponibilidad”.</p>

      <h6><strong>¿Cómo gestiono turnos activos?</strong></h6>
      <p>Desde “Mis Servicios”, donde verás la agenda de pacientes asignados.</p>

      <h6><strong>¿Quién puede ver mis datos?</strong></h6>
      <p>Solo pacientes asignados y el equipo administrativo de la plataforma.</p>

      <h6><strong>¿Dónde veo mis pagos?</strong></h6>
      <p>En la sección “Liquidaciones”, con historial y estado de cobros.</p>
      <hr />
      <p class="text-center fw-bold">¿Alguna otra consulta? ¡Estamos para ayudarte!</p>
    </div>

    <div class="text-center mt-3">
      <button class="btn btn-primary px-4" (click)="cerrarFaq()">Entendido</button>
    </div>
  </div>
</div>
