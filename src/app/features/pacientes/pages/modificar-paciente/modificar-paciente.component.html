<div class="layout">
  <!-- Menú lateral -->
  <app-menu-paciente [mostrarPagos]="false"></app-menu-paciente>

  <!-- Contenido principal -->
  <main class="content">
    <!-- Tarjeta contenedora -->
    <div class="form-card">
      <h2 class="form-card-title">Modificar datos del paciente</h2>

      <form [formGroup]="form" (ngSubmit)="guardarCambios()">
        <!-- Grilla de campos -->
        <div class="form-grid">
          <!-- DNI con icono de candado -->
          <div class="form-item">
            <label>DNI</label>
            <div class="input-container readonly">
              <input class="form-control"
                     [value]="patient?.numeroHistoriaClinica || patient?.dni || ''"
                     readonly (click)="mostrarAtencion()" />
              <button type="button" class="icon-button" (click)="mostrarAtencion()">
                <i class="bi bi-lock-fill"></i>
              </button>
            </div>
          </div>

          <!-- Apellido con icono de candado -->
          <div class="form-item">
            <label>Apellido</label>
            <div class="input-container readonly">
              <input class="form-control"
                     [value]="patient?.apellido || ''"
                     readonly (click)="mostrarAtencion()" />
              <button type="button" class="icon-button" (click)="mostrarAtencion()">
                <i class="bi bi-lock-fill"></i>
              </button>
            </div>
          </div>

          <!-- Nombre con icono de candado -->
          <div class="form-item">
            <label>Nombre</label>
            <div class="input-container readonly">
              <input class="form-control"
                     [value]="patient?.nombre || ''"
                     readonly (click)="mostrarAtencion()" />
              <button type="button" class="icon-button" (click)="mostrarAtencion()">
                <i class="bi bi-lock-fill"></i>
              </button>
            </div>
          </div>

          <!-- Dirección editable -->
          <div class="form-item">
            <label>Dirección</label>
            <div class="input-container">
              <input class="form-control" formControlName="direccion" />
            </div>
          </div>

          <!-- Teléfono editable -->
          <div class="form-item">
            <label>Teléfono</label>
            <div class="input-container">
              <input class="form-control" formControlName="telefono" />
            </div>
          </div>

          <!-- Obra social -->
          <div class="form-item">
            <label>Obra social</label>
            <div class="input-container">
              <input class="form-control" formControlName="obraSocial" />
            </div>
          </div>

          <!-- N° de afiliado -->
          <div class="form-item">
            <label>N° de afiliado</label>
            <div class="input-container">
              <input class="form-control" formControlName="nroAfiliado" />
            </div>
          </div>

          <!-- Tipo de discapacidad ocupa toda la fila -->
          <div class="form-item full">
            <label>Tipo de discapacidad</label>
            <div class="input-container">
              <input class="form-control" formControlName="tipoDiscapacidad" />
            </div>
          </div>
        </div>

        <!-- Botones de acción -->
        <div class="actions">
          <button type="button"
                  class="btn btn-danger"
                  (click)="darDeBaja()">
            <i class="bi bi-trash me-2"></i>Darme de baja
          </button>
          <button type="submit"
                  class="btn btn-primary">
            Guardar cambios
          </button>
        </div>
      </form>
    </div>
  </main>
</div>
